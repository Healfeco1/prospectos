(this.webpackJsonpconcredito=this.webpackJsonpconcredito||[]).push([[0],{254:function(e,t,a){},256:function(e,t,a){},260:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a.n(c),s=a(24),o=a.n(s),r=a(123),l=a(32),i=a(23),d=a(25),b=a(14),j=a(16),m=a(10),u=a(26),O=(a(140),a(141),a(142),{apiKey:"AIzaSyAkxZMP6KJnsCKFqGbgOpZuBwHfb-ysy3c",authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"/prospectos",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyAkxZMP6KJnsCKFqGbgOpZuBwHfb-ysy3c",REACT_APP_AUTH_DOMAIN:"concredito-f5512.firebaseapp.com",REACT_APP_DATABASE_URL:"",REACT_APP_PROJECT_ID:"concredito-f5512",REACT_APP_STORAGE_BUCKET:"concredito-f5512.appspot.com",REACT_APP_MESSAGING_SENDER_ID:"877734757930",REACT_APP_APP_ID:"1:877734757930:web:ed8bb0372f15bb8819e553",REACT_APP_MEASUREMENT_ID:"G-7K32XWFZ1F"}).REACT_APP_AUTHDOMAIN,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"/prospectos",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyAkxZMP6KJnsCKFqGbgOpZuBwHfb-ysy3c",REACT_APP_AUTH_DOMAIN:"concredito-f5512.firebaseapp.com",REACT_APP_DATABASE_URL:"",REACT_APP_PROJECT_ID:"concredito-f5512",REACT_APP_STORAGE_BUCKET:"concredito-f5512.appspot.com",REACT_APP_MESSAGING_SENDER_ID:"877734757930",REACT_APP_APP_ID:"1:877734757930:web:ed8bb0372f15bb8819e553",REACT_APP_MEASUREMENT_ID:"G-7K32XWFZ1F"}).REACT_APP_BASEURL,projectId:"concredito-f5512",storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"/prospectos",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyAkxZMP6KJnsCKFqGbgOpZuBwHfb-ysy3c",REACT_APP_AUTH_DOMAIN:"concredito-f5512.firebaseapp.com",REACT_APP_DATABASE_URL:"",REACT_APP_PROJECT_ID:"concredito-f5512",REACT_APP_STORAGE_BUCKET:"concredito-f5512.appspot.com",REACT_APP_MESSAGING_SENDER_ID:"877734757930",REACT_APP_APP_ID:"1:877734757930:web:ed8bb0372f15bb8819e553",REACT_APP_MEASUREMENT_ID:"G-7K32XWFZ1F"}).REACT_APP_STORAGEBUCKET,messagingSenderId:"877734757930",appId:"1:877734757930:web:ed8bb0372f15bb8819e553",measurementId:"G-7K32XWFZ1F"});u.a.initializeApp(O),u.a.analytics(),u.a.auth();u.a;var p=function(e){var t=[];u.a.database().ref("prospectos").on("value",(function(a){var c=a.val();if(c)for(var n=0,s=Object.entries(c);n<s.length;n++){var o=s[n],r=Object(b.a)(Object(b.a)({},o[1]),{},Object(d.a)({},"id",o[0]));t.push(r),e(t)}}))},x=function(e,t){var a={};return u.a.database().ref("prospectos/".concat(e)).once("value").then((function(e){var c=e.val();t(c),a=c})),a},h=function(e,t){JSON.stringify(t);var a=u.a.database().ref("/prospectos/".concat(t));Object.entries(e).map((function(e){console.log(e),a.update(Object(d.a)({},e[0],e[1]))}))},f=function(e){console.log("saveMethod",e);var t=u.a.database().ref("prospectos");e.status="Enviado",t.push(e)},A=a(4);function P(e){var t=Object(c.useState)([]),a=Object(j.a)(t,2),n=a[0],s=a[1],o=Object(c.useState)(!1),r=Object(j.a)(o,2),l=r[0],i=r[1],d=function(){p(s)};Object(c.useEffect)((function(){d()}),[]);return Object(A.jsx)(_.Provider,{value:{getAllProspects:d,resProspectos:[],prospectos:n,getDataIdProspecto:function(e,t){x(e,t)},handledSaveProspect:function(e){f(e),d()},handledUpdateProspect:function(e,t){h(e,t),d()},sethandleShowModal:i,handleShowModal:l},children:e.children})}var _=n.a.createContext(),v=a(65),E=a(119),N=a(3),g=a(40);function S(e){var t=e.idProspecto,a=e.sethandleShowModal,n=Object(c.useContext)(_),s=n.getDataIdProspecto,o=n.handledSaveProspect,r=n.handledUpdateProspect,u=Object(c.useState)({nombreProspecto:"",primerApellido:"",segundoApellido:"",calle:"",numero:"",colonia:"",codigoPostal:"",telefono:"",rfc:"",observaciones:"",status:"",documentos:""}),O=Object(j.a)(u,2),p=O[0],x=O[1],h=Object(c.useRef)(p),f=Object(c.useState)([]),P=Object(j.a)(f,2),S=P[0],T=P[1],C=Object(l.useToasts)().addToast,R=Object(c.useState)(0),y=Object(j.a)(R,2),D=y[0],F=y[1],I=Object(c.useState)([]),w=Object(j.a)(I,2),B=w[0],K=w[1],M=Object(c.useState)([]),U=Object(j.a)(M,2),H=U[0],G=U[1];Object(c.useEffect)((function(){t&&s(t,x)}),[]);var k=function(e){C("Capturar todos los campos con '*' son obligatorios",{appearance:"error",autoDismiss:!0})};function z(e){}Object(c.useEffect)((function(){}),[D]);var L=function(e){var t="documentoName".concat(D-1),a="documento".concat(D-1);if(e.target.name==t){var c=Object(b.a)(Object(b.a)({},H),{},Object(d.a)({},e.target.name,e.target.value));G(c)}if(e.target.name==a){var n=Object(b.a)(Object(b.a)({},H),{},Object(d.a)({},e.target.name,e.target.value));G(n)}var s=S,o=Object(b.a)(Object(b.a)({},s),{},Object(d.a)({},e.target.name,e.target.value));T(o)};return Object(c.useEffect)((function(){console.log("values: ",h)}),[h.current]),Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(m.d,{innerRef:h,enableReinitialize:!0,initialValues:p,onSubmit:function(e,c){return function(e,t,c){e=Object(b.a)(Object(b.a)({},e),{},{documentos:H}),c?r(S,c):o(e),a(!1),t()}(e,c.resetForm,t)},validationSchema:v.a().shape({nombreProspecto:v.b().required((function(){return k()})),observaciones:v.b().required((function(){return k()}))}),children:Object(A.jsxs)(m.c,{children:[Object(A.jsxs)("div",{className:"col-md-10 mb-3 d-flex justify-content-between",children:[Object(A.jsxs)("div",{children:[Object(A.jsx)("label",{htmlFor:"status",className:"mr-2",children:"Estatus"}),Object(A.jsx)(m.b,{name:"status",type:"text",className:"text-white text-center ".concat("Autorizado"==p.status?"bg-success":"Rechazado"==p.status?"bg-danger":"Enviado"==p.status?"bg-secondary":""),disabled:!0})]}),""!=p.status&&"Enviado"==p.status?Object(A.jsxs)("div",{className:"col-md-8",children:[Object(A.jsx)(g.a,{variant:"outline-success btn-sm mr-2",onClick:function(){return function(){var e=Object(b.a)(Object(b.a)({},S),{},{status:"Autorizado"});r(e,t),s(t,x)}()},children:"Autorizar"}),Object(A.jsx)(g.a,{variant:"outline-danger btn-sm",onClick:function(){return function(){if(0==p.observaciones.length)S.observaciones||C("Captura el campo: Observaciones, es obligatorio *",{appearance:"error",autoDismiss:!0});else{var e=Object(b.a)(Object(b.a)({},S),{},{status:"Rechazado"});r(e,t),s(t,x),T([])}}()},children:"Rechazar"})]}):""]}),Object(A.jsxs)("div",{className:"form-row m-1",children:[Object(A.jsxs)("div",{className:"col-md-4 mb-3",children:[Object(A.jsxs)("label",{htmlFor:"nombreProspecto",children:["Nombre del prospecto",Object(A.jsx)("b",{className:"text-danger",children:"*"})]}),Object(A.jsx)(m.b,{name:"nombreProspecto",type:"text",className:"form-control",validate:z,onBlur:function(e){return L(e)},disabled:""!=p.status?"disabled":""}),Object(A.jsx)(m.a,{name:"nombreProspecto",component:"span",className:"text-danger"})]}),Object(A.jsxs)("div",{className:"col-md-4 mb-3",children:[Object(A.jsxs)("label",{htmlFor:"primerApellido",children:["Primer apellido",Object(A.jsx)("b",{className:"text-danger",children:"*"})]}),Object(A.jsx)(m.b,{name:"primerApellido",type:"text",className:"form-control",validate:z,onBlur:function(e){return L(e)},disabled:""!=p.status?"disabled":""}),Object(A.jsx)(m.a,{name:"primerApellido",component:"span",className:"text-danger"})]}),Object(A.jsxs)("div",{className:"col-md-4 mb-3",children:[Object(A.jsx)("label",{htmlFor:"segundoApellido",children:"Segundo Apellido"}),Object(A.jsx)(m.b,{name:"segundoApellido",type:"text",className:"form-control",onBlur:function(e){return L(e)},disabled:""!=p.status?"disabled":""})]}),Object(A.jsxs)("div",{className:"col-md-5 mb-3",children:[Object(A.jsxs)("label",{htmlFor:"calle",children:["Calle",Object(A.jsx)("b",{className:"text-danger",children:"*"})]}),Object(A.jsx)(m.b,{name:"calle",type:"text",className:"form-control",validate:z,onBlur:function(e){return L(e)},disabled:""!=p.status?"disabled":""}),Object(A.jsx)(m.a,{name:"calle",component:"span",className:"text-danger"})]}),Object(A.jsxs)("div",{className:"col-md-3 mb-3",children:[Object(A.jsxs)("label",{htmlFor:"numero",children:["N\xfamero",Object(A.jsx)("b",{className:"text-danger",children:"*"})]}),Object(A.jsx)(m.b,{name:"numero",type:"number",className:"form-control",validate:z,onBlur:function(e){return L(e)},disabled:""!=p.status?"disabled":""}),Object(A.jsx)(m.a,{name:"numero",component:"span",className:"text-danger"})]}),Object(A.jsxs)("div",{className:"col-md-4 mb-3",children:[Object(A.jsxs)("label",{htmlFor:"colonia",children:["Colonia",Object(A.jsx)("b",{className:"text-danger",children:"*"})]}),Object(A.jsx)(m.b,{name:"colonia",type:"text",className:"form-control",validate:z,onBlur:function(e){return L(e)},disabled:""!=p.status?"disabled":""}),Object(A.jsx)(m.a,{name:"colonia",component:"span",className:"text-danger"})]}),Object(A.jsxs)("div",{className:"col-md-3 mb-3",children:[Object(A.jsxs)("label",{htmlFor:"codigoPostal",children:["CP",Object(A.jsx)("b",{className:"text-danger",children:"*"})]}),Object(A.jsx)(m.b,{name:"codigoPostal",type:"number",className:"form-control",validate:z,onBlur:function(e){return L(e)},disabled:""!=p.status?"disabled":""}),Object(A.jsx)(m.a,{name:"codigoPostal",component:"span",className:"text-danger"})]}),Object(A.jsxs)("div",{className:"col-md-4 mb-3",children:[Object(A.jsxs)("label",{htmlFor:"telefono",children:["Tel\xe9fono",Object(A.jsx)("b",{className:"text-danger",children:"*"})]}),Object(A.jsx)(m.b,{name:"telefono",type:"number",className:"form-control",validate:z,onBlur:function(e){return L(e)},disabled:""!=p.status?"disabled":""}),Object(A.jsx)(m.a,{name:"telefono",component:"span",className:"text-danger"})]}),Object(A.jsxs)("div",{className:"col-md-5 mb-3",children:[Object(A.jsxs)("label",{htmlFor:"rfc",children:["RFC",Object(A.jsx)("b",{className:"text-danger",children:"*"})]}),Object(A.jsx)(m.b,{name:"rfc",type:"text",className:"form-control",validate:z,onBlur:function(e){return L(e)},disabled:""!=p.status?"disabled":""}),Object(A.jsx)(m.a,{name:"rfc",component:"span",className:"text-danger"})]}),Object(A.jsxs)("div",{className:"col-12 mb-3",children:[Object(A.jsx)("label",{htmlFor:"documentos",children:"Documentos"}),Object(A.jsx)(N.b.Provider,{value:{size:"1em",className:"mb-2"},children:Object(A.jsx)("span",{onClick:function(e){return function(e){var t;e.preventDefault(),Object(b.a)(Object(b.a)({},p),{},(t={},Object(d.a)(t,"documentoName".concat(D),""),Object(d.a)(t,"documento".concat(D),""),t));var a=[].concat(Object(i.a)(B),[D]);K(a),F(D+1)}(e)},children:""!=p.status?"":Object(A.jsx)(E.a,{})})})]}),Object(A.jsxs)("div",{className:"col-md-12 mb-3",children:[B.map((function(e){return Object(A.jsxs)("span",{className:"form-row mb-3 d-flex align-items-center text-center",children:[Object(A.jsxs)("div",{className:"form-row col-md-6 mb-3 ml-5",children:[Object(A.jsxs)("label",{htmlFor:"documentoName".concat(e),children:["Nombre del documento",Object(A.jsx)("b",{className:"text-danger",children:"*"})]}),Object(A.jsx)(m.b,{name:"documentoName".concat(e),type:"text",className:"form-control",validate:z,onBlur:function(e){return L(e)}}),Object(A.jsx)(m.a,{name:"documentoName".concat(e),component:"span",className:"text-danger"})]}),Object(A.jsxs)("div",{className:"col-md-5 mt-3",children:[Object(A.jsx)(m.b,{name:"documento".concat(e),type:"file",className:"form-control-file",validate:z,onBlur:function(e){return L(e)},required:!0}),Object(A.jsx)(m.a,{name:"documento".concat(e),component:"span",className:"text-danger"})]})]},e)})),p.documentos?Object(A.jsx)("span",{className:"form-row mb-3",children:Object(A.jsxs)("table",{className:"table table-striped table-hover",children:[Object(A.jsx)("thead",{children:Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{scope:"col",children:"Nombre"}),Object(A.jsx)("th",{scope:"col",children:"Documento"})]})}),Object(A.jsx)("tbody",{children:Object.keys(p.documentos).map((function(e,t){return Object(A.jsx)(A.Fragment,{children:e=="documentoName".concat(Math.round(t%2))?Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:p.documentos["documentoName".concat(Math.round(t%2))]}),Object(A.jsx)("td",{children:p.documentos["documento".concat(Math.round(t%2))]})]}):""})}))})]})}):""]}),""!=p.status?Object(A.jsxs)("div",{className:"col-md-12 mb-3",children:[Object(A.jsxs)("label",{htmlFor:"observaciones",children:["Observaciones",Object(A.jsx)("b",{className:"text-danger",children:"*"})]}),Object(A.jsx)(m.b,{name:"observaciones",type:"text",className:"form-control",onBlur:function(e){return L(e)},required:!0}),Object(A.jsx)(m.a,{name:"observaciones",component:"span",className:"text-danger"})]}):""]}),Object(A.jsx)("div",{className:"text-center",children:Object(A.jsx)("button",{className:"btn bg-primary",type:"submit",children:"Submit"})})]})})})}var T=a(120),C=a.n(T),R=a(44),y=a(122),D=a.n(y),F=(a(254),function(e){return Object(A.jsx)(l.DefaultToastContainer,Object(b.a)(Object(b.a)({},e),{},{style:{zIndex:9999}}))});function I(e){var t=e.idProspecto,a=e.setidProspecto,n=Object(c.useContext)(_),s=n.handleShowModal,o=n.sethandleShowModal,r=Object(c.useState)(!1),i=Object(j.a)(r,2),d=(i[0],i[1],function(){D.a.mixin({customClass:{cancelButton:"btn btn-success",confirmButton:"btn btn-danger mr-2"},buttonsStyling:!1}).fire({title:"Saldr\xe1 de la pantalla de captura de prospectos y ning\xfan dato ser\xe1 guardado",text:"Si sale perder\xe1 toda la captura.",icon:"warning",showClass:{popup:"animate__animated animate__fadeInDown"},showCancelButton:!0,confirmButtonText:"Salir",cancelButtonText:"Seguir editando"}).then((function(e){e.isConfirmed&&(o(!1),a(null))}))});return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{className:"text-center",children:Object(A.jsx)(g.a,{variant:"outline-success",onClick:function(){o(!0)},children:"Capturar Prospecto"})}),Object(A.jsxs)(R.a,{show:s,onHide:function(){o(!1),a(null)},dialogClassName:"mod","aria-labelledby":"example-custom-modal-styling-title",keyboard:!1,backdrop:"static",children:[Object(A.jsx)(R.a.Header,{children:Object(A.jsx)(R.a.Title,{children:"Modal heading"})}),Object(A.jsx)(R.a.Body,{children:Object(A.jsx)(l.ToastProvider,{components:{ToastContainer:F},children:Object(A.jsx)(S,{idProspecto:t,sethandleShowModal:o})})}),Object(A.jsxs)(R.a.Footer,{children:[Object(A.jsx)(g.a,{variant:"secondary",onClick:d,children:"Close"}),Object(A.jsx)(g.a,{variant:"primary",onClick:d,children:"Save Changes"})]})]}),Object(A.jsx)("span",{children:t||""})]})}a(256);function w(){var e=Object(c.useContext)(_),t=e.prospectos,a=e.sethandleShowModal,s=Object(c.useState)(),o=Object(j.a)(s,2),r=o[0],l=o[1],i=n.a.useState(!1),d=Object(j.a)(i,2),b=(d[0],d[1],Object(c.useState)(t)),m=Object(j.a)(b,2),u=m[0],O=m[1];Object(c.useLayoutEffect)((function(){O(t)}),[t]);var p=Object(A.jsx)(C.a,{title:"Lista de Prospectos",columns:[{name:"Nombre del prospecto",selector:"nombreProspecto",sortable:!0,grow:.6,center:!0},{name:"Primer Apellido",selector:"primerApellido",sortable:!0,center:!0,grow:.5},{name:"Segundo Apellido",selector:"segundoApellido",sortable:!0,grow:.5,center:!0},{name:"Estatus",selector:"status",sortable:!0,center:!0}],data:u,pagination:!0,paginationComponentOptions:{rowsPerPageText:"Filas por P\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"},fixedHeader:!0,striped:!0,pointerOnHover:!0,subHeader:!0,dense:!0,highlightOnHover:!0,onRowClicked:function(e){return t=e.id,l((function(e){return t})),void a(!0);var t},noDataComponent:"No hay datos capturados"});return Object(c.useEffect)((function(){O(t)}),[u]),Object(A.jsxs)(A.Fragment,{children:[p,Object(A.jsx)(I,{idProspecto:r,setidProspecto:l})]})}var B=function(){return Object(c.useContext)(_).handleProspects,Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(l.ToastProvider,{}),Object(A.jsx)(w,{})]})};o.a.render(Object(A.jsx)(r.a,{children:Object(A.jsx)(P,{children:Object(A.jsx)(B,{})})}),document.getElementById("root"))}},[[260,1,2]]]);
//# sourceMappingURL=main.e54ad3a2.chunk.js.map