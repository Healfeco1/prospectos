(this.webpackJsonpconcredito=this.webpackJsonpconcredito||[]).push([[0],{254:function(e,t,a){},256:function(e,t,a){},260:function(e,t,a){"use strict";a.r(t);var c=a(2),o=a.n(c),n=a(24),s=a.n(n),r=a(123),l=a(32),i=a(23),d=a(25),b=a(18),m=a(15),j=a(7),u=a(26),O=(a(140),a(141),a(142),{apiKey:"AIzaSyAkxZMP6KJnsCKFqGbgOpZuBwHfb-ysy3c",authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"/prospectos",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyAkxZMP6KJnsCKFqGbgOpZuBwHfb-ysy3c",REACT_APP_AUTH_DOMAIN:"concredito-f5512.firebaseapp.com",REACT_APP_DATABASE_URL:"",REACT_APP_PROJECT_ID:"concredito-f5512",REACT_APP_STORAGE_BUCKET:"concredito-f5512.appspot.com",REACT_APP_MESSAGING_SENDER_ID:"877734757930",REACT_APP_APP_ID:"1:877734757930:web:ed8bb0372f15bb8819e553",REACT_APP_MEASUREMENT_ID:"G-7K32XWFZ1F"}).REACT_APP_AUTHDOMAIN,databaseURL:Object({NODE_ENV:"production",PUBLIC_URL:"/prospectos",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyAkxZMP6KJnsCKFqGbgOpZuBwHfb-ysy3c",REACT_APP_AUTH_DOMAIN:"concredito-f5512.firebaseapp.com",REACT_APP_DATABASE_URL:"",REACT_APP_PROJECT_ID:"concredito-f5512",REACT_APP_STORAGE_BUCKET:"concredito-f5512.appspot.com",REACT_APP_MESSAGING_SENDER_ID:"877734757930",REACT_APP_APP_ID:"1:877734757930:web:ed8bb0372f15bb8819e553",REACT_APP_MEASUREMENT_ID:"G-7K32XWFZ1F"}).REACT_APP_BASEURL,projectId:"concredito-f5512",storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"/prospectos",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyAkxZMP6KJnsCKFqGbgOpZuBwHfb-ysy3c",REACT_APP_AUTH_DOMAIN:"concredito-f5512.firebaseapp.com",REACT_APP_DATABASE_URL:"",REACT_APP_PROJECT_ID:"concredito-f5512",REACT_APP_STORAGE_BUCKET:"concredito-f5512.appspot.com",REACT_APP_MESSAGING_SENDER_ID:"877734757930",REACT_APP_APP_ID:"1:877734757930:web:ed8bb0372f15bb8819e553",REACT_APP_MEASUREMENT_ID:"G-7K32XWFZ1F"}).REACT_APP_STORAGEBUCKET,messagingSenderId:"877734757930",appId:"1:877734757930:web:ed8bb0372f15bb8819e553",measurementId:"G-7K32XWFZ1F"});u.a.initializeApp(O),u.a.analytics(),u.a.auth();u.a;var p=function(e){var t=[];u.a.database().ref("prospectos").on("value",(function(a){var c=a.val();if(c)for(var o=0,n=Object.entries(c);o<n.length;o++){var s=n[o],r=Object(b.a)(Object(b.a)({},s[1]),{},Object(d.a)({},"id",s[0]));t.push(r),e(t)}}))},x=function(e,t){var a={};return u.a.database().ref("prospectos/".concat(e)).once("value").then((function(e){var c=e.val();t(c),a=c})),a},f=function(e,t){JSON.stringify(t);var a=u.a.database().ref("/prospectos/".concat(t));Object.entries(e).map((function(e){console.log(e),a.update(Object(d.a)({},e[0],e[1]))}))},h=function(e){console.log("saveMethod",e);var t=u.a.database().ref("prospectos");e.status="Enviado",t.push(e)},A=a(4);function P(e){var t=Object(c.useState)([]),a=Object(m.a)(t,2),o=a[0],n=a[1],s=Object(c.useState)(!1),r=Object(m.a)(s,2),l=r[0],i=r[1],d=function(){p(n)};Object(c.useEffect)((function(){d()}),[]);return Object(A.jsx)(v.Provider,{value:{getAllProspects:d,resProspectos:[],prospectos:o,getDataIdProspecto:function(e,t){x(e,t)},handledSaveProspect:function(e){h(e),d()},handledUpdateProspect:function(e,t){f(e,t),d()},sethandleShowModal:i,handleShowModal:l},children:e.children})}var v=o.a.createContext(),_=a(65),N=a(119),g=a(3),E=a(40);function S(e){var t=e.idProspecto,a=e.sethandleShowModal,o=Object(c.useState)(0),n=Object(m.a)(o,2),s=n[0],r=n[1],u=Object(c.useState)([]),O=Object(m.a)(u,2),p=O[0],x=O[1],f=Object(l.useToasts)().addToast,h=Object(c.useContext)(v),P=h.getDataIdProspecto,S=h.handledSaveProspect,T=h.handledUpdateProspect,C=Object(c.useState)([]),R=Object(m.a)(C,2),y=R[0],D=R[1],F=Object(c.useState)([]),I=Object(m.a)(F,2),B=I[0],w=I[1],K=Object(c.useState)({nombreProspecto:"",primerApellido:"",segundoApellido:"",calle:"",numero:"",colonia:"",codigoPostal:"",telefono:"",rfc:"",observaciones:"",status:"",documentos:""}),M=Object(m.a)(K,2),U=M[0],H=M[1];Object(c.useEffect)((function(){t&&P(t,H)}),[]);var G=function(e){f("Capturar todos los campos con '*' son obligatorios",{appearance:"error",autoDismiss:!0})};function k(e){var t;return e||(t="Campo Requerido"),t}var z=function(e){var t="documentoName".concat(s-1),a="documento".concat(s-1);if(e.target.name==t){var c=Object(b.a)(Object(b.a)({},B),{},Object(d.a)({},e.target.name,e.target.value));w(c)}if(e.target.name==a){var o=Object(b.a)(Object(b.a)({},B),{},Object(d.a)({},e.target.name,e.target.value));w(o)}var n=p,r=Object(b.a)(Object(b.a)({},n),{},Object(d.a)({},e.target.name,e.target.value));x(r)},L=Object(c.useRef)(U);return Object(c.useEffect)((function(){console.log("values: ",L),console.log("values: ",p)}),[L.current]),Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(j.d,{innerRef:L,enableReinitialize:!0,initialValues:U,onSubmit:function(e,c){return function(e,t,c){c?T(p,c):S(e),a(!1),t()}(e,c.resetForm,t)},validationSchema:_.a().shape({nombreProspecto:_.b().required((function(){return G()})),observaciones:_.b().required((function(){return G()}))}),children:Object(A.jsxs)(j.c,{children:[Object(A.jsxs)("div",{className:"col-md-4 mb-3 ml-auto d-flex align-content-center",children:[Object(A.jsx)("label",{htmlFor:"status",className:"mt-1 ml-auto col-md-1",children:"Estatus"}),Object(A.jsx)(j.b,{name:"status",type:"text",className:"form-control-sm col-md-5 ml-auto text-white text-center ".concat("Autorizado"==U.status?"bg-success":"Rechazado"==U.status?"bg-danger":"Enviado"==U.status?"bg-secondary":""),disabled:!0})]}),""!=U.status&&"Enviado"==U.status?Object(A.jsxs)("div",{className:"col-md-3 mb-3 ml-auto text-center",children:[Object(A.jsx)(E.a,{variant:"outline-success",className:"ml-4 mr-2",onClick:function(){return function(){var e=Object(b.a)(Object(b.a)({},p),{},{status:"Autorizado"});T(e,t),P(t,H)}()},children:"Autorizar"}),Object(A.jsx)(E.a,{variant:"outline-danger",onClick:function(){return function(){if(0==U.observaciones.length)p.observaciones||f("Captura el campo: Observaciones, es obligatorio *",{appearance:"error",autoDismiss:!0});else{var e=Object(b.a)(Object(b.a)({},p),{},{status:"Rechazado"});T(e,t),P(t,H),x([])}}()},children:"Rechazar"})]}):"",Object(A.jsxs)("div",{className:"form-row m-1",children:[Object(A.jsxs)("div",{className:"col-md-4 mb-3",children:[Object(A.jsxs)("label",{htmlFor:"nombreProspecto",children:["Nombre del prospecto",Object(A.jsx)("b",{className:"text-danger",children:"*"})]}),Object(A.jsx)(j.b,{name:"nombreProspecto",type:"text",className:"form-control",validate:k,onBlur:function(e){return z(e)},disabled:""!=U.status?"disabled":""}),Object(A.jsx)(j.a,{name:"nombreProspecto",component:"span",className:"text-danger"})]}),Object(A.jsxs)("div",{className:"col-md-4 mb-3",children:[Object(A.jsxs)("label",{htmlFor:"primerApellido",children:["Primer apellido",Object(A.jsx)("b",{className:"text-danger",children:"*"})]}),Object(A.jsx)(j.b,{name:"primerApellido",type:"text",className:"form-control",validate:k,onBlur:function(e){return z(e)},disabled:""!=U.status?"disabled":""}),Object(A.jsx)(j.a,{name:"primerApellido",component:"span",className:"text-danger"})]}),Object(A.jsxs)("div",{className:"col-md-4 mb-3",children:[Object(A.jsx)("label",{htmlFor:"segundoApellido",children:"Segundo Apellido"}),Object(A.jsx)(j.b,{name:"segundoApellido",type:"text",className:"form-control",onBlur:function(e){return z(e)},disabled:""!=U.status?"disabled":""})]}),Object(A.jsxs)("div",{className:"col-md-5 mb-3",children:[Object(A.jsxs)("label",{htmlFor:"calle",children:["Calle",Object(A.jsx)("b",{className:"text-danger",children:"*"})]}),Object(A.jsx)(j.b,{name:"calle",type:"text",className:"form-control",validate:k,onBlur:function(e){return z(e)},disabled:""!=U.status?"disabled":""}),Object(A.jsx)(j.a,{name:"calle",component:"span",className:"text-danger"})]}),Object(A.jsxs)("div",{className:"col-md-3 mb-3",children:[Object(A.jsxs)("label",{htmlFor:"numero",children:["N\xfamero",Object(A.jsx)("b",{className:"text-danger",children:"*"})]}),Object(A.jsx)(j.b,{name:"numero",type:"number",className:"form-control",validate:k,onBlur:function(e){return z(e)},disabled:""!=U.status?"disabled":""}),Object(A.jsx)(j.a,{name:"numero",component:"span",className:"text-danger"})]}),Object(A.jsxs)("div",{className:"col-md-4 mb-3",children:[Object(A.jsxs)("label",{htmlFor:"colonia",children:["Colonia",Object(A.jsx)("b",{className:"text-danger",children:"*"})]}),Object(A.jsx)(j.b,{name:"colonia",type:"text",className:"form-control",validate:k,onBlur:function(e){return z(e)},disabled:""!=U.status?"disabled":""}),Object(A.jsx)(j.a,{name:"colonia",component:"span",className:"text-danger"})]}),Object(A.jsxs)("div",{className:"col-md-3 mb-3",children:[Object(A.jsxs)("label",{htmlFor:"codigoPostal",children:["CP",Object(A.jsx)("b",{className:"text-danger",children:"*"})]}),Object(A.jsx)(j.b,{name:"codigoPostal",type:"number",className:"form-control",validate:k,onBlur:function(e){return z(e)},disabled:""!=U.status?"disabled":""}),Object(A.jsx)(j.a,{name:"codigoPostal",component:"span",className:"text-danger"})]}),Object(A.jsxs)("div",{className:"col-md-4 mb-3",children:[Object(A.jsxs)("label",{htmlFor:"telefono",children:["Tel\xe9fono",Object(A.jsx)("b",{className:"text-danger",children:"*"})]}),Object(A.jsx)(j.b,{name:"telefono",type:"number",className:"form-control",validate:k,onBlur:function(e){return z(e)},disabled:""!=U.status?"disabled":""}),Object(A.jsx)(j.a,{name:"telefono",component:"span",className:"text-danger"})]}),Object(A.jsxs)("div",{className:"col-md-5 mb-3",children:[Object(A.jsxs)("label",{htmlFor:"rfc",children:["RFC",Object(A.jsx)("b",{className:"text-danger",children:"*"})]}),Object(A.jsx)(j.b,{name:"rfc",type:"text",className:"form-control",validate:k,onBlur:function(e){return z(e)},disabled:""!=U.status?"disabled":""}),Object(A.jsx)(j.a,{name:"rfc",component:"span",className:"text-danger"})]}),Object(A.jsxs)("div",{className:"col-12 mb-3",children:[Object(A.jsx)("label",{htmlFor:"documentos",children:"Documentos"}),Object(A.jsx)(g.b.Provider,{value:{size:"1em",className:"mb-2"},children:Object(A.jsx)("span",{onClick:function(e){return function(e){var t;e.preventDefault(),Object(b.a)(Object(b.a)({},U),{},(t={},Object(d.a)(t,"documentoName".concat(s),""),Object(d.a)(t,"documento".concat(s),""),t));var a=[].concat(Object(i.a)(y),[s]);D(a),r(s+1)}(e)},children:""!=U.status?"":Object(A.jsx)(N.a,{})})})]}),Object(A.jsxs)("div",{className:"col-md-12 mb-3",children:[y.map((function(e){return Object(A.jsxs)("span",{className:"form-row mb-3 d-flex align-items-center text-center",children:[Object(A.jsxs)("div",{className:"form-row col-md-6 mb-3 ml-5",children:[Object(A.jsxs)("label",{htmlFor:"documentoName".concat(e),children:["Nombre del documento",Object(A.jsx)("b",{className:"text-danger",children:"*"})]}),Object(A.jsx)(j.b,{name:"documentoName".concat(e),type:"text",className:"form-control",validate:k,onBlur:function(e){return z(e)}}),Object(A.jsx)(j.a,{name:"documentoName".concat(e),component:"span",className:"text-danger"})]}),Object(A.jsxs)("div",{className:"col-md-5 mt-3",children:[Object(A.jsx)(j.b,{name:"documento".concat(e),type:"file",className:"form-control-file",validate:k,onBlur:function(e){return z(e)},required:!0}),Object(A.jsx)(j.a,{name:"documento".concat(e),component:"span",className:"text-danger"})]})]},e)})),Object(A.jsx)("span",{className:"form-row mb-3 d-flex align-items-center text-center",children:Object.keys(U.documentos).map((function(e,t){return Object(A.jsx)(A.Fragment,{children:"documento0"==e?Object(A.jsxs)("div",{className:"form-row col-md-6 ml-5",children:[Object(A.jsx)("label",{htmlFor:U.documentos[e],children:"Nombre del documento"}),Object(A.jsx)(j.b,{value:U.documentos[e],type:"text",className:"form-control",disabled:!0}),Object(A.jsx)(j.a,{name:"documento".concat(s),component:"span",className:"text-danger"})]}):Object(A.jsxs)("div",{className:"col-md-5",children:[Object(A.jsx)("label",{htmlFor:U[e],children:"Documentos"}),Object(A.jsx)(j.b,{name:U[e],value:U.documentos.documento0,type:"text",className:"form-control",disabled:!0}),Object(A.jsx)(j.a,{name:U[e],component:"span",className:"text-danger"})]})})}))})]}),""!=U.status?Object(A.jsxs)("div",{className:"col-md-12 mb-3",children:[Object(A.jsxs)("label",{htmlFor:"observaciones",children:["Observaciones",Object(A.jsx)("b",{className:"text-danger",children:"*"})]}),Object(A.jsx)(j.b,{name:"observaciones",type:"text",className:"form-control",onBlur:function(e){return z(e)},required:!0}),Object(A.jsx)(j.a,{name:"observaciones",component:"span",className:"text-danger"})]}):""]}),Object(A.jsx)("div",{className:"text-center",children:Object(A.jsx)("button",{className:"btn bg-primary",type:"submit",children:"Submit"})})]})})})}var T=a(120),C=a.n(T),R=a(44),y=a(122),D=a.n(y),F=(a(254),function(e){return Object(A.jsx)(l.DefaultToastContainer,Object(b.a)(Object(b.a)({},e),{},{style:{zIndex:9999}}))});function I(e){var t=e.idProspecto,a=e.setidProspecto,o=Object(c.useContext)(v),n=o.handleShowModal,s=o.sethandleShowModal,r=Object(c.useState)(!1),i=Object(m.a)(r,2),d=(i[0],i[1],function(){D.a.mixin({customClass:{cancelButton:"btn btn-success",confirmButton:"btn btn-danger mr-2"},buttonsStyling:!1}).fire({title:"Saldr\xe1 de la pantalla de captura de prospectos y ning\xfan dato ser\xe1 guardado",text:"Si sale perder\xe1 toda la captura.",icon:"warning",showClass:{popup:"animate__animated animate__fadeInDown"},showCancelButton:!0,confirmButtonText:"Salir",cancelButtonText:"Seguir editando"}).then((function(e){e.isConfirmed&&(s(!1),a(null))}))});return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{className:"text-center",children:Object(A.jsx)(E.a,{variant:"outline-success",onClick:function(){s(!0)},children:"Capturar Prospecto"})}),Object(A.jsxs)(R.a,{show:n,onHide:function(){s(!1),a(null)},dialogClassName:"mod","aria-labelledby":"example-custom-modal-styling-title",children:[Object(A.jsx)(R.a.Header,{closeButton:!0,children:Object(A.jsx)(R.a.Title,{children:"Modal heading"})}),Object(A.jsx)(R.a.Body,{children:Object(A.jsx)(l.ToastProvider,{components:{ToastContainer:F},children:Object(A.jsx)(S,{idProspecto:t,sethandleShowModal:s})})}),Object(A.jsxs)(R.a.Footer,{children:[Object(A.jsx)(E.a,{variant:"secondary",onClick:d,children:"Close"}),Object(A.jsx)(E.a,{variant:"primary",onClick:d,children:"Save Changes"})]})]}),Object(A.jsx)("span",{children:t||""})]})}a(256);function B(){var e=Object(c.useContext)(v),t=e.prospectos,a=e.sethandleShowModal,n=Object(c.useState)(),s=Object(m.a)(n,2),r=s[0],l=s[1],i=o.a.useState(!1),d=Object(m.a)(i,2),b=(d[0],d[1],Object(c.useState)(t)),j=Object(m.a)(b,2),u=j[0],O=j[1];Object(c.useLayoutEffect)((function(){O(t)}),[t]);var p=Object(A.jsx)(C.a,{title:"Lista de Prospectos",columns:[{name:"Nombre del prospecto",selector:"nombreProspecto",sortable:!0,grow:.6,center:!0},{name:"Primer Apellido",selector:"primerApellido",sortable:!0,center:!0,grow:.5},{name:"Segundo Apellido",selector:"segundoApellido",sortable:!0,grow:.5,center:!0},{name:"Estatus",selector:"status",sortable:!0,center:!0}],data:u,pagination:!0,paginationComponentOptions:{rowsPerPageText:"Filas por P\xe1gina",rangeSeparatorText:"de",selectAllRowsItem:!0,selectAllRowsItemText:"Todos"},fixedHeader:!0,striped:!0,pointerOnHover:!0,subHeader:!0,dense:!0,highlightOnHover:!0,onRowClicked:function(e){return t=e.id,l((function(e){return t})),void a(!0);var t},noDataComponent:"No hay datos capturados"});return Object(c.useEffect)((function(){O(t)}),[u]),Object(A.jsxs)(A.Fragment,{children:[p,Object(A.jsx)(I,{idProspecto:r,setidProspecto:l})]})}var w=function(){return Object(c.useContext)(v).handleProspects,Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(l.ToastProvider,{}),Object(A.jsx)(B,{})]})};s.a.render(Object(A.jsx)(r.a,{children:Object(A.jsx)(P,{children:Object(A.jsx)(w,{})})}),document.getElementById("root"))}},[[260,1,2]]]);
//# sourceMappingURL=main.92a2a13b.chunk.js.map